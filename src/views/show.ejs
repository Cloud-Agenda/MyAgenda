<%- include('partials/header') %>

<section class="show card">
  <h2><%= event.title %></h2>
  <% function fmtDate(d){ if(!d) return '-'; try { return (new Date(d)).toISOString().slice(0,10); } catch(e){ return '-'; } } %>
  <% function fmtTime(d){ if(!d) return '-'; try { return (new Date(d)).toISOString().slice(11,16); } catch(e){ return '-'; } } %>
  <div class="meta">
    <div class="item"><strong>Date:</strong> <%= fmtDate(event.due_date) %></div>
    <div class="item"><strong>Time:</strong> <%= fmtTime(event.due_date) %></div>
    <div class="item"><strong>Subject:</strong> <%= event.subject || '-' %></div>
    <div class="item"><strong>Class:</strong> <%= event.class || '-' %></div>
  </div>
  <div>
    <h4>Description</h4>
    <p class="desc"><%= event.description || '-' %></p>
  </div>

  <% if (event.attachment) { %>
    <div style="margin-top:0.5rem;">
      <strong>Attachment:</strong> <a href="<%= event.attachment %>" target="_blank" rel="noopener noreferrer">Voir</a>
    </div>
  <% } %>

  <div class="actions">
    <a class="button secondary" href="/events/<%= event.id %>/edit">Edit</a>
    <a class="button outline" href="/events/<%= event.id %>/ical">Export iCal</a>
    <form action="/events/<%= event.id %>?_method=DELETE" method="POST" onsubmit="return confirm('Delete this event?');" style="display:inline">
      <button class="button danger" type="submit">Delete</button>
    </form>
    <a class="button muted" href="/">Back</a>
  </div>
</section>

<%- include('partials/footer') %>
